{% extends 'base.html' %}
{% load static %}
{% block head %}
{% block title %}<title>{{my_post}}</title>{% endblock title %}
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="{% static 'css/index.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/detail.css' %}">
{% endblock head %}



{% block content %}
<div class="back"><a href="{{ request.META.HTTP_REFERER }}">ë’¤ë¡œê°€ê¸°</a></div>
<div class="category">{{my_post.category}}</div>

<div class="detail-wrapper">
    <div class="content-wrapper">
        <div class="user">{{my_post.writer}}</div>
        <div class="title">ì œëª©: {{my_post.title}}</div>
        <div class="content"> {{my_post.content|safe}}</div>
        {% if my_post.myimage %}
            <div class="image">
                <img src="{{my_post.myimage.url}}" title="ì²¨ë¶€ ì´ë¯¸ì§€" alt="ê²Œì‹œíŒ ê¸€ ì´ë¯¸ì§€">
            </div>
            {% endif %}
    </div>
    <div class="sub-wrapper">
        <div class="count-wrapper">
        <!-- ì¡°íšŒìˆ˜ -->
            {% if my_post.writer == user.nickname %}
                <div class="delete-post"><a href="{% url 'delete_post' pk=my_post.id  %}">ê¸€ ì‚­ì œ</a></div>
            {% endif %}
            <div class="hit-count">
            {% load hitcount_tags %}
            ì¡°íšŒìˆ˜ {% get_hit_count for my_post within "days=1" %}
            </div> 
            <div class="like">
                
                <a href="{% url 'like_toggle' my_post.id  %}">
                   
                    {% if my_post in user.like_post.all %}
                    ğŸ’”
                    {% else %}
                    â¤ï¸ 
                    {% endif %}
                    {{my_post.like_count}} 
                </a> 
               
            </div> 
        </div>
         
        <div class="time">{{my_post.updated_at}}</div>
         <!-- í•´ë‹¹ í¬ìŠ¤íŠ¸ ì‘ì„±ìœ ì €ê°€ í˜„ì¬ ìš”ì²­ëœ ìœ ì €ì˜ ë‹‰ë„¤ì„ê³¼ ê°™ì„ë•Œ -->
         
    </div>
  
        
        
       
    

    
</div>

<form method="POST" action="{% url 'create_comment' my_post.id %}" class="comment-form">
    {% csrf_token %}
    {{comment_form}}
    <input type="submit">
</form>

<div class="comment-wrapper">
    {% for comment in my_post.comment_set.all %}
    <div class="comment">{{comment.body}}</div>
    <div class="comment-time">{{comment.created_at}}</div>
    <div class="writer">{{comment.writer}}</div>
    {%if user.nickname == comment.writer %}
    <div class="delete-comment">
        <!-- ëŒ“ê¸€ ì‚­ì œ ì „ í™•ì¸ ì•ŒëŒ -->
        <a onclick="return confirm('ëŒ“ê¸€ì„ ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');" href="{% url 'delete_comment' comment.id %}">ì‚­ì œ</a>
    </div>
    {% endif %}
    <!-- ë‚˜ì¤‘ì— í´ë¦­í•˜ë©´ ëŒ€ëŒ“ê¸€ í¼ ë‚˜íƒ€ë‚˜ê²Œ êµ¬í˜„í•˜ê¸° -->
    <div class="recomment-btn">ëŒ€ëŒ“ê¸€</div>
        <form method="POST" action="{% url 'create_recomment' my_post.id comment.id %}" class="recomment-form">
            {% csrf_token %}
            {{recomment_form}}
            <input type="submit">
        </form>
        {% for recomment in comment.recomment.all %}
            <div class="recomment">ëŒ€ëŒ“ê¸€:{{recomment.body}}</div>
            <div class="recomment-time">{{recomment.created_at}}</div>
            <div class="writer">{{recomment.writer}}</div>
            <!-- ìš”ì²­ëœ ìœ ì €ê°€ í•´ë‹¹ ê¸€ì“´ì´ì™€ ê°™ìœ¼ë©´ -->
            {%if user.nickname == recomment.writer %}
            <div class="delete-recomment">
                <a onclick="return confirm('ëŒ“ê¸€ì„ ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');" href="{% url 'delete_recomment' recomment.id %}">ì‚­ì œ</a>
            </div>

            {% endif %}
        {% endfor %}
    {% endfor %}
</div>




<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
</script>
<script>
    // $('.delete-comment').click(function(){
    //     confirm('ì§€ìš¸êº¼ë‹ˆ?');
    // });

   
</script>




{% endblock content %}
